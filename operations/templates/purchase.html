{% extends "layout.html" %}
{% block content %}
<h1 class='text-3xl mb-4'>Purchase New Items</h1>
<div class='container'>

    <strong>Invoice No.:</strong>
    <label class='mb-4'>{{ invoice_number }}</label><br>

    <form method="post" class='space-x-4'>
        {% csrf_token %}
        <label>Item:</label>
        {{ temp_form.item_id }}
        <label>Quantity:</label>
        {{ temp_form.quantity }}

        <button class='btn btn-primary' type="submit" name="add_item">Add Item</button>
        {{ temp_form.item_id.errors }}
    </form>

    <form method="post" class='space-x-4 mt-4'>
        {% csrf_token %}
        <label>Supplier:</label>
        {{ purchase_form.supplier_id }}
        <button class='btn btn-primary mt-2' type="submit" name="finalize_purchase">Finalize Purchase</button>
    </form>

    <!-- Display added items -->
    {% comment %} {% if temp_items.exists %} {% endcomment %}
    <table class="table mt-4">
        <thead>
            <tr>
                <th scope="col">Sl. No.</th>
                <th scope="col">Item</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in temp_items %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ item.item_id.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.items_total }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% comment %} {% endif %} {% endcomment %}

    <div>
        <strong>Subtotal: </strong> {{ sub_total }}
    </div>


</div>
{% endblock %}
